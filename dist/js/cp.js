(()=>{"use strict";const t={props:{period:{type:String}},data:function(){return{data:void 0}},watch:{period:{immediate:!0,handler:function(){this.loadData()}}},methods:{loadData:function(){var t=this;this.$axios.post("/cp/analytics/dashboard/stats",{type:this.type,period:this.period}).then((function(e){t.data=e.data.data}))}}};function e(t,e,i,s,n,a,o,r){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=i,c._compiled=!0),s&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=l):n&&(l=r?function(){n.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:n),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:t,options:c}}const i=e({mixins:[t],data:function(){return{type:"general"}},computed:{visitDuration:function(){var t=Math.floor(this.data.visitDuration),e=t%60,i=(t-e)/60;return i?"".concat(i,"m ").concat(e,"s"):"".concat(e,"s")}}},(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h3",{staticClass:"mt-4 font-bold"},[t._v("General")]),t._v(" "),t.data?i("div",{staticClass:"flex justify-between"},[i("div",[t._v("Unique Visitors"),i("br"),t._v(t._s(t.data.uniqueVisitors))]),t._v(" "),i("div",[t._v("Total visits"),i("br"),t._v(t._s(t.data.visits))]),t._v(" "),i("div",[t._v("Pageviews"),i("br"),t._v(t._s(t.data.pageviews))]),t._v(" "),i("div",[t._v("Views per Visit"),i("br"),t._v(t._s(t.data.viewsPerVisit.toFixed(1)))]),t._v(" "),i("div",[t._v("Visit Duration"),i("br"),t._v(t._s(t.visitDuration))])]):t._e()])}),[],!1,null,null,null).exports;const s=e({mixins:[t],data:function(){return{type:"sources"}},computed:{sources:function(){var t;return null!==(t=this.data)&&void 0!==t?t:[]}}},(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{},[i("h3",{staticClass:"font-bold"},[t._v("Top Sources")]),t._v(" "),t._l(t.sources,(function(e){return i("div",{key:e.source,staticClass:"flex justify-between"},[i("div",{staticClass:"flex-grow"},[t._v(t._s(e.source||"Direct / None"))]),t._v(" "),i("div",{staticClass:"text-right"},[t._v(t._s(e.visitors))])])}))],2)}),[],!1,null,null,null).exports;const n=e({mixins:[t],data:function(){return{type:"pages"}},computed:{pages:function(){var t;return null!==(t=this.data)&&void 0!==t?t:[]}}},(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{},[i("h3",{staticClass:"font-bold"},[t._v("Top Pages")]),t._v(" "),t._l(t.pages,(function(e){return i("div",{key:e.path,staticClass:"flex justify-between"},[i("div",{staticClass:"flex-grow"},[t._v(t._s(e.path))]),t._v(" "),i("div",{staticClass:"text-right"},[t._v(t._s(e.visitors))])])}))],2)}),[],!1,null,null,null).exports;const a=e({mixins:[t],data:function(){return{type:"locations"}},computed:{locations:function(){var t;return null!==(t=this.data)&&void 0!==t?t:[]}}},(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{},[i("h3",{staticClass:"font-bold"},[t._v("Locations")]),t._v(" "),t._l(t.locations,(function(e){return i("div",{key:e.country,staticClass:"flex justify-between"},[i("div",{staticClass:"flex-grow"},[t._v(t._s(e.country))]),t._v(" "),i("div",{staticClass:"text-right"},[t._v(t._s(e.visitors))])])}))],2)}),[],!1,null,null,null).exports;var o=e({mixins:[t],data:function(){return{type:"browsers"}},computed:{items:function(){var t;return null!==(t=this.data)&&void 0!==t?t:[]},key:function(){return{browsers:"browser",operatingSystems:"os",devices:"device"}[this.type]}},methods:{setType:function(t){this.type=t,this.loadData()}}},(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{},[i("div",{staticClass:"flex justify-between"},[i("h3",{staticClass:"font-bold"},[t._v("Devices")]),t._v(" "),i("div",{staticClass:"flex gap-2",staticStyle:{gap:"0.5rem"}},[i("button",{on:{click:function(e){return t.setType("browsers")}}},[t._v("Browser")]),t._v(" "),i("button",{on:{click:function(e){return t.setType("operatingSystems")}}},[t._v("OS")]),t._v(" "),i("button",{on:{click:function(e){return t.setType("devices")}}},[t._v("Size")])])]),t._v(" "),t._l(t.items,(function(e){return i("div",{key:e[t.key],staticClass:"flex justify-between"},[i("div",{staticClass:"flex-grow"},[t._v(t._s(e[t.key]))]),t._v(" "),i("div",{staticClass:"text-right"},[t._v(t._s(e.visitors))])])}))],2)}),[],!1,null,null,null);const r=e({components:{General:i,Sources:s,Pages:n,Locations:a,Devices:o.exports},data:function(){return{period:"last 7 days"}},created:function(){}},(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card p-4 mb-5"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.period,expression:"period"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.period=e.target.multiple?i:i[0]}}},[i("option",{attrs:{value:"last 1 day"}},[t._v("Today")]),t._v(" "),i("option",{attrs:{value:"last 7 days"}},[t._v("Last 7 days")]),t._v(" "),i("option",{attrs:{value:"last 30 days"}},[t._v("Last 30 days")]),t._v(" "),i("option",{attrs:{value:"all time"}},[t._v("All time")])]),t._v(" "),i("general",{attrs:{period:t.period}}),t._v(" "),i("div",{staticClass:"mt-8 grid gap-8 grid-cols-2",staticStyle:{gap:"2rem","grid-template-columns":"repeat(2, minmax(0, 1fr))"}},[i("sources",{attrs:{period:t.period}}),t._v(" "),i("pages",{attrs:{period:t.period}}),t._v(" "),i("locations",{attrs:{period:t.period}}),t._v(" "),i("devices",{attrs:{period:t.period}})],1)],1)}),[],!1,null,null,null).exports;const l=e({props:{wait:{type:Number,default:500}},data:function(){return{sizeEmitted:!1}},render:function(){return this.$scopedSlots.default({})},mounted:function(){new ResizeObserver(this.onResize).observe(this.$el)},methods:{onResize:function(t){var e=this,i=t[0].contentRect,s={width:i.width,height:i.height};if(!this.sizeEmitted)return this.$emit("size",s),void(this.sizeEmitted=!0);this.timeout||this.$emit("resizeStart",s),clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.$emit("resizeEnd",s),e.timeout=null}),this.wait)}}},undefined,undefined,!1,null,null,null).exports;Statamic.booting((function(){Statamic.$components.register("resize-container",l),Statamic.$components.register("analytics-dashboard",r)}))})();